# PIC plume 

This is a 2D particle-in-cell (PIC) code for simulation of the expansion of a plasma plume generated by a plasma source. The code uses a rectangular domain, electrostatic fields, and the Monte-Carlo collisions (MCC) algorithm. 

## Description of the problem

(Include picture and description)


## Building

Before using the code it is necessary to install:

- Open MPI - https://www.open-mpi.org/
- HYPRE - https://github.com/hypre-space/hypre

Download HYPRE and extract it in the `/lib/` folder, then build the library in this folder.  After building MPI and HYPRE it is necessary to modify the`Makefile` to include the version of HYRE, this is done modifying the variable `hypre_dr`  to the folder name that contains the library, e.g. , `hypre-2.16.0`. Finally, to build the code, just execute the command `make`. 

Compile with the `-D VERBOSE` flag in the variable `CXXFLAGS` to print more information during runtime.

## To do

- Inject electron in pulses. The magnitudes must always obey $\bar{I}_e \geq I_i$. Electron pulse shape obeys Boltzmann electron relation with $\phi = V_0\sin(\omega t) + V_{bias}$. Here $n_0$ is calculated from the maxwellian flux from the ion current and $V_{bias}$ should make the voltage to be always above zero and guarantee that the average electron current is higher than the ion current. Beyond that, electrons should have a drift velocity which is a parameter in the code
- ~~Read paper about the capacitor coupled to the walls of the chamber~~ Is there a simpler way to implement the simultaneous solution of Poisson and the circuit? 
- ~~Apply the external capacitor strategy. Electrons and ions that leave the domain charge a capacitor; reflect electrons which have $E_k < V_{cap}$. It's kind of $E_{crit} = V$~~
  
Backlog:

- Configuration file with expressions, possible to parametrize variables with plasma characteristics (e.g. Debye lenght) => use a big unordered_map for parameters and at the beggining of each loop use a dummy variable to decrease the access times
- Correction of electric field in Dirichlet boundaries with Gauss law
- Smooth the calculation of $E_{crit}$ with moving average
- Solving in cylindrical coordinates
- How to better organize the code and declutter the main function
- Do modular particle boundaries 
